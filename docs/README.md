# <다리건너기게임>

### ⤵️ 프로그램의 전체적인 흐름

1. "다리 건너기 게임을 시작합니다."라고 메시지를 띄운다.
2. "다리의 길이를 입력해주세요."라고 메시지를 띄운다.
3. 플레이어에게 다리 길이를 입력 받는다.
4. 컨트롤러가 뷰에게서 데이터를 받아온다.
5. 받은 데이터를 모델에게 준다.
6. 모델은 받은 데이터의 유효성 검증을 한다.
    - 만일 유효성 검증에 실패하면 실패했다는 메시지를 반환한다.
    - 컨트롤러가 반환된 메시지를 읽고 뷰에게 실패 메시지를 전달한다.
    - 뷰는 에러 메시지를 출력하고 다시 입력을 받는다. -> 3번부터 다시 실행한다.
7. 유효성 검증에 성공하면 다리 생성을 시작한다.
8. BridgeRandomNumberGenerator 클래스를 이용해 다리를 생성하고 다리 데이터를 저장한다.
9. 다리가 생성되었다는 것을 컨트롤러가 뷰에게 알린다.
10. 뷰는 "이동할 칸을 선택해주세요. (위: U, 아래: D)"란 메시지를 띄운다.
11. 사용자로부터 U 또는 D의 입력을 받는다.
12. 입력 받은 데이터를 컨트롤러가 가져온다.
13. 컨트롤러가 모델에게 데이터를 전달한다.
14. 데이터를 받은 모델은 유효성 검증을 한다.
    - 만일 유효성 검증에 실패하면 실패했다는 메시지를 반환한다.
    - 컨트롤러가 반환된 메시지를 읽고 뷰에게 실패 메시지를 전달한다.
    - 뷰는 에러 메시지를 출력하고 다시 입력을 받는다. -> 10번부터 다시 실행한다.
15. 유효성 검증이 완료되면 받은 데이터를 가지고 이동 가능 여부를 검사한다.
16. 컨트롤러가 이동가능한지 불가능한지에 대한 데이터를 가져온다.
17. 가져온 데이터를 뷰에 전달한다.
18. 뷰는 가져온 데이터를 가지고 출력한다.
    1. 만일 이동할 수 없는 칸을 골랐을 경우 "게임을 다시 시도할지 여부를 입력해주세요. (재시도: R, 종료: Q)"를 출력한다.
        1. 사용자에게 R 또는 Q를 입력 받는다.
        2. 입력 받은 값을 컨트롤러에 전달한다.
        3. 컨트롤러는 모델에게 값을 전달한다.
        4. 받은 값에 대해서 유효성 검증을 한다.
            - 만일 유효성 검증에 실패하면 실패했다는 메시지를 반환한다.
                - 컨트롤러가 반환된 메시지를 읽고 뷰에게 실패 메시지를 전달한다.
                - 뷰는 에러 메시지를 출력하고 다시 입력을 받는다. -> 18-1번을 다시 실행한다.
            - 유효성 검증에 성공한 경우
                - 재시도할 경우(R)
                    1. 모델이 기존에 갖고 있던 다리 데이터와 시도횟수는 1을 늘린채 갖고 나머지 데이터는 초기화한다.
                    2. 10번부터 다시 실행한다.
                - 종료할 경우(Q)
                    1. 게임 종료에 필요한 데이터들(게임시도 횟수, 성공여부)
                    2. 19번부터 실행한다.
19. "최종 게임 결과"라는 메시지를 띄운다.
20. 마지막에 진행했던 다리건너기를 화면에 띄운다.
21. "게임 성공 여부:"에 대한 결과를 띄운다.
22. "총 시도한 횟수:"에 대한 결과를 띄운다.
23. 게임을 종료한다.

### 📝 기능 리스트

##### 👀 View 관련 클래스들

- 주의 : View는 Model에만 의존해야 한다!

[ StartView ] : 게임 시작 안내 메시지를 출력하는 클래스

- [x] 게임 시작에 관한 메시지를 출력 메서드

[ OutputView Class ] : 게임 진행에 필요한 메시지를 출력하는 클래스

- [x] 입력 받은 이동에 대한 맵을 출력하는 메서드
- [x] 게임 재시도 여부에 관한 메시지를 출력하는 메서드
- [x] 최종 게임 결과 메시지를 출력하는 메서드
- [x] 게임 성공 여부 메시지를 출력하는 메서드
- [x] 총 시도한 횟수에 대한 결과를 띄우는 메서드
- [x] 컨트롤러로부터 받은 데이터로 출력양식을 만드는 메서드
- [x] 맵을 만드는 메서드
- [x] 맵의 시작 표시를 만드는 메서드
- [x] 맵의 끝 표시를 만드는 메서드
- [x] 맵에서 칸(구분자)를 만드는 메서드
- [x] 위쪽 맵과 아래쪽 맵을 합치는 메서드
- [x] 게임 종료시 출력에 필요한 데이터를 초기화하는 메서드

[ OutputMessages Class ] : OutputView의 출력 메서드가 출력할 메시지를 가지고 있는 클래스

[MapComponent Class ] : 다리 건너기의 맵 구성요소를 가지고 있는 클래스

[ InputView Class ]  : 게임 진행에 필요한 입력을 받는 클래스

- [x] 플레이어에게 다리 길이를 입력 받는 메서드
- [x] 플레이어에게 이동할 칸을 입력 받는 메서드
- [x] 플레이어에게 게임 재시도/종료를 입력 받는 메서드

[ InputMessages Class ] : 게임에서 입력시 출력할 안내 메시지를 가진 클래스


##### 🕹 Controller 관련 클래스들

- Controller는 Model과 View에 의존해도 된다.

[ BridgeGameController Class ] : 전체적인 컨트롤러의 실행흐름을 관리한다.
- [x] 게임이 종료되었음을 뷰와 모델에게 전달하는 메서드

[ BridgeMakeController Class ] : 다리길이입력에 대한 실행흐름과 데이터 전송을 관리한다.
- [x] 다리길이 입력 정보를 모델에 전달하는 메서드
- [x] 다리길이 입력에 대한 유효성 검증 결과를 전달하는 메서드

[ BridgeMoveController Class ] : 이동명령에 대한 실행흐름과 데이터 전송을 관리한다.
- [x] 이동명령을 뷰로부터 읽어들여 모델에게 전송하는 메서드
- [x] 잘못된 입력이란 모델의 처리결과를 뷰에 전송하는 메서드
- [x] 이동명령에 대한 모델의 데이터처리 결과를 받아 뷰에 전송하는 메서드
- [x] 게임진행과 종료에 대한 모델의 판단 결과를 뷰에게 전송하는 메서드

[ BridgeCommandController Class ] : 재시작/종료에 대한 실행흐름과 데이터 전송을 관리한다.
- [x] 뷰로부터 입력받은 명령을 모델에 전송하여 유효한 입력인지 확인하는 과정을 컨트롤하는 메서드
- [x] 유효하지 않을 경우 오류를 전송하고 입력을 다시 받도록 컨트롤하는 메서드
- [x] 종료명령과 재시작 명령에 따라 데이터를 전송하여 뷰와 모델의 동작을 다르게 하도록 하는 메서드

##### 💻 Model 관련 클래스들

- 주의 : Model은 어떤 도메인에도 의존하면 안된다!

[ BridgeGame Class ] : 전체적인 동작이 진행되고 필요한 데이터가 저장된 클래스

- [x] 유저로부터 받은 다리길이로 다리를 생성하는 메서드
    - [x] 입력받은 다리길이가 유효한 입력인지 확인하는 메서드
    - [x] 게임에 필요한 데이터를 초기화하는 메서드
- [x] 유저로부터 받은 이동명령을 가지고 위치를 이동시키는 메서드
    - [x] 입력받은 이동명령이 유효한 입력인지 확인하는 메서드
- [x] 유저로부터 받은 종료명령을 가지고 재시작 또는 종료를 하는 메서드
    - [x] 입력받은 재시작 혹은 종료명령이 유효한 입력인인지 확인하는 메서드
- [x] 게임의 결과를 반환하는 메서드
- [x] 게임종료시 가지고 있던 데이터를 모두 초기화하는 메서드

[ BridgeErrorMessages Class ] : 에러발견시 throw 할 메시지 정보를 가지고 있는 클래스

[ MoveCommand Class ] : 열거형 클래스로 사용자의 입력인 U와 D를 각각 숫자 1과 0에 대응시킨다.

- [x] 숫자 1과 0을 각각 "U"와 "D"에 대응시켜 반환하는 메서드

[ BridgeSizeConverter Class ] : 입력받은 다리 길이를 문자열에서 숫자로 변환하는 메서드를 가진 클래스

- [x] 문자열로 되어있는 입력된 다리 길이를 숫자로 변환하는 메서드

[ UserInputExceptions Class ] : 사용자가 입력한 데이터들에 대해 유효성을 검사하는

- [x] 사용자가 입력한 다리 길이에 대한 유효성을 검증하는 메서드
    - [x] 입력 받은 다리 길이가 숫자인지 판단하는 메서드
    - [x] 입력 받은 다리 길이가 유효 범위 숫자인지 판단하는 메서드
- [x] 사용자가 입력한 이동명령(U 혹은 D)에 대한 유효성을 검증하는 메서드
    - [x] 입력 받은 이동명령이 한 글자인지 판단하는 메서드
    - [x] 입력 받은 이동명령이 U 또는 D에 해당하는지 판단하는 메서드
- [x] 사용자가 입력한 종료명령(R 혹은 Q)에 대한 유효성을 검증하는 메서드
    - [x] 입력 받은 종료이 R 혹은 Q인지 판단하는 메서드

[ BridgeChecker Class ] : 다리를 건널 수 있는지 판단하는 클래스

- [x] 다리에 있는 값과 입력 받은 값을 비교해서 이동 가능여부를 판단하는 메서드
- [x] 다리 건너는 횟수와 다리 길이를 비교해서 게임이 끝났는지 아닌지를 판단하는 메서드

[ GameSetting Class ] : 게임의 시작과 종료를 담당하는 클래스

- [x] 게임 첫 실행시 게임에 필요한 데이터를 초기화하는 메서드

##### 🛠 그외 DTO, Util 등등 클래스들

[ MoveCommandDto Class ] : 사용자의 입력 정보를 전달할 클래스

[ GameResultDto Class ] : 게임 종료시 게임의 결과를 전달할 클래스

[ MoveChecker Class ] : 받은 입력이 "U"인지 "D"인지 확인하는 클래스

[ MoveSymbol Class ] : 이동 문자열에 대한 상수를 가진 클래스

[ CommandChecker Class ] : 받은 입력이 "Q"인지 "R"인지 "Error"인지 확인하는 클래스

[ CommandSymbol Class ] : 재시작/종료/에러 문자열에 대한 상수를 가진 클래스

[ BridgeMaker Class ] : 다리를 생성하는 클래스

- [x] 입력 받은 길이만틈 다리를 만드는 메서드
- [x] 다리에 0 또는 1을 랜덤으로 부여하는 메서드
